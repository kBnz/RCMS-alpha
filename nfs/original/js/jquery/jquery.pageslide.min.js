(function(j$){j$.fn.pageSlide=function(options){var settings=j$.extend({width:"300px",duration:"normal",direction:"left",modal:false,_identifier:j$(this)},options);var pageslide_slide_wrap_css={position:'fixed',width:'0',top:'0',height:'100%',zIndex:'999'};var pageslide_body_wrap_css={position:'relative',zIndex:'0'};var pageslide_blanket_css={position:'absolute',top:'0px',left:'0px',height:'100%',width:'100%',opacity:'0.0',backgroundColor:'black',zIndex:'1',display:'none'};function _initialize(anchor){if(j$("#pageslide-body-wrap, #pageslide-content, #pageslide-slide-wrap").size()==0){var psBodyWrap=document.createElement("div");j$(psBodyWrap).css(pageslide_body_wrap_css);j$(psBodyWrap).attr("id","pageslide-body-wrap").width(j$("body").width());j$("body").contents().wrapAll(psBodyWrap);var psSlideContent=document.createElement("div");j$(psSlideContent).attr("id","pageslide-content").width(settings.width);var psSlideWrap=document.createElement("div");j$(psSlideWrap).css(pageslide_slide_wrap_css);j$(psSlideWrap).attr("id","pageslide-slide-wrap").append(psSlideContent);j$("body").append(psSlideWrap)}if(j$("#pageslide-blanket").size()==0&&settings.modal==true){var psSlideBlanket=document.createElement("div");j$(psSlideBlanket).css(pageslide_blanket_css);j$(psSlideBlanket).attr("id","pageslide-blanket");j$("body").append(psSlideBlanket);j$("#pageslide-blanket").click(function(){return false})}j$(window).resize(function(){j$("#pageslide-body-wrap").width(j$("body").width())});j$(anchor).attr("rel","pageslide")};function _openSlide(elm){if(j$("#pageslide-slide-wrap").width()!=0)return false;_showBlanket();if(settings.direction=="right"){direction={right:"-"+settings.width};j$("#pageslide-slide-wrap").css({left:0});_overflowFixAdd()}else{direction={left:"-"+settings.width};j$("#pageslide-slide-wrap").css({right:0})}j$("#pageslide-slide-wrap").animate({width:settings.width},settings.duration);j$("#pageslide-body-wrap").animate(direction,settings.duration,function(){j$.ajax({type:"GET",url:j$(elm).attr("href"),success:function(data){j$("#pageslide-content").css("width",settings.width).html(data).queue(function(){j$(this).dequeue();j$(this).find('.pageslide-close').unbind('click').click(function(elm){_closeSlide(elm);j$(this).find('pageslide-close').unbind('click')})})}})})};function _closeSlide(event){if(j$(event)[0].button!=2&&j$("#pageslide-slide-wrap").css('width')!="0px"){j$.fn.pageSlideClose(settings)}};function _showBlanket(){if(settings.modal==true){j$("#pageslide-blanket").toggle().animate({opacity:'0.8'},'fast','linear')}};function _overflowFixAdd(){(j$.browser.msie)?j$("body, html").css({overflowX:'hidden'}):j$("body").css({overflowX:'hidden'})}_initialize(this);return this.each(function(){j$(this).unbind("click").bind("click",function(){_openSlide(this);j$("#pageslide-slide-wrap").unbind('click').click(function(e){if(e.target.tagName!="A")return false});if(settings.modal!=true){j$(document).unbind('click').click(function(e){if(e.target.tagName!="A"){_closeSlide(e);return false}})}return false})})}})(jQuery);(function(j$){j$.fn.pageSlideClose=function(options){var settings=j$.extend({width:"300px",duration:"normal",direction:"left",modal:false,_identifier:j$(this)},options);function _hideBlanket(){if(settings.modal==true&&j$("#pageslide-blanket").is(":visible")){j$("#pageslide-blanket").animate({opacity:'0.0'},'fast','linear',function(){j$(this).hide()})}}function _overflowFixRemove(){(j$.browser.msie)?j$("body, html").css({overflowX:''}):j$("body").css({overflowX:''})}_hideBlanket();direction=(j$("#pageslide-slide-wrap").css("left")!="0px")?{left:"0"}:{right:"0"};j$("#pageslide-body-wrap").animate(direction,settings.duration);j$("#pageslide-slide-wrap").animate({width:"0"},settings.duration,function(){j$("#pageslide-content").css("width","0px").empty();j$('#pageslide-body-wrap, #pageslide-slide-wrap').css('left','');j$('#pageslide-body-wrap, #pageslide-slide-wrap').css('right','');_overflowFixRemove()})}})(jQuery);(function(j$){j$(document).ready(function(){j$(document).keyup(function(event){if(!j$("#pageslide-blanket").is(":visible")&&event.keyCode==27)j$.fn.pageSlideClose()})})})(jQuery);